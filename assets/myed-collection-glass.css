/* ==========================================================================
  MyEdenDay — Collection Template Glass (Scoped)
  Scope: only .myed-ct-surface
========================================================================== */
:root{
  --myed-ct-radius: 22px;
  --myed-ct-chip-radius: 999px;
  --myed-ct-glass-shadow: 0 18px 40px rgba(0,0,0,0.28);
}

body.template-collection{
  --myed-ct-text-rgb: var(--myed-collection-foreground, 245, 247, 250);
}

.myed-ct-surface{
  --myed-ct-text: rgba(var(--myed-ct-text-rgb,245,247,250),0.92);
  --myed-ct-muted: rgba(var(--myed-ct-text-rgb,245,247,250),0.78);
  --myed-ct-glass-bg: rgba(10,14,22,var(--myed-ct-bg-alpha,0.55));
  --myed-ct-glass-frost: rgba(255,255,255,var(--myed-ct-frost-alpha,0.06));
  --myed-ct-glass-border: rgba(255,255,255,var(--myed-ct-border-alpha,0.14));
  --myed-ct-chip-bg: rgba(10,14,22,calc(var(--myed-ct-bg-alpha,0.55)*0.85));
  --myed-ct-glass-shadow: 0 18px 40px rgba(0,0,0,0.28);
}

.myed-ct-surface :is([class^="color-"], [class*=" color-"], .gradient){
  --color-foreground: var(--myed-ct-text-rgb);
}

/* Top controls bar */
.myed-ct-surface .myed-ct-toolbar{
  position: relative;
  overflow: hidden;
  isolation: isolate;
  border-radius: var(--myed-ct-radius);
  background: var(--myed-ct-glass-bg);
  border: 1px solid var(--myed-ct-glass-border);
  box-shadow: var(--myed-ct-glass-shadow);
  padding: 14px 18px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}
.myed-ct-surface .myed-ct-toolbar::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background: var(--myed-ct-glass-frost);
}
@supports ((backdrop-filter: blur(1px))){
  .myed-ct-surface .myed-ct-toolbar::before{
    -webkit-backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
    backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
  }
}
.myed-ct-surface .myed-ct-toolbar > *{
  position: relative;
  z-index: 1;
  min-width: 0;
  width: 100%;
}

.myed-ct-surface .facets.small-hide:not(.facets-pill){
  background: transparent;
  border: 0;
  box-shadow: none;
  padding: 0;
  margin: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1.4rem;
  flex-wrap: nowrap;
}

/* MYED — FIX 03: Topbar text vertical alignment (all filter layouts) */
.myed-ct-surface .facets.small-hide:not(.facets-pill){
  padding: 10px 14px;       /* sinirdan uzaklastir */
  min-height: 52px;         /* stabil bar yuksekligi */
  box-sizing: border-box;
  align-items: center;      /* zaten var ama garanti */
}

/* label/headings default margin/line-height farkini sifirla */
.myed-ct-surface .facets.small-hide:not(.facets-pill) :is(
  .facets__heading,
  .facet-filters__label,
  .facet-filters__label label,
  .product-count__text
){
  margin: 0;
  line-height: 1.2;
  white-space: nowrap;
}

/* sort alanini da dikey ortala */
.myed-ct-surface .facets.small-hide:not(.facets-pill) .facet-filters.sorting,
.myed-ct-surface .facets.small-hide:not(.facets-pill) .facet-filters__field{
  display: flex;
  align-items: center;
  gap: 10px;
}

/* select kutusu icindeki metin baseline kaymasini azalt */
.myed-ct-surface .facets.small-hide:not(.facets-pill) .select__select,
.myed-ct-surface .facets.small-hide:not(.facets-pill) .facet-filters__sort{
  line-height: 1.2;
}

/* MYED — FIX 04: Topbar baseline + spacing (all layouts) */
.myed-ct-surface .facets.small-hide:not(.facets-pill){
  padding: 12px 18px;     /* kenara yapışma bitsin */
  min-height: 56px;       /* stabil bar yüksekliği */
  align-items: center;
}

/* Form + wrapper + sorting tek hizada */
.myed-ct-surface .facets.small-hide:not(.facets-pill) :is(
  .facets__form,
  .facets__wrapper,
  .facet-filters.sorting,
  .facet-filters__field,
  .product-count
){
  display: flex;
  align-items: center;
}

/* Metin baseline farklarını sıfırla */
.myed-ct-surface .facets.small-hide:not(.facets-pill) :is(
  .facets__heading,
  .facet-filters__label,
  .facet-filters__label label,
  .product-count__text
){
  margin: 0;
  line-height: 1.2;
  white-space: nowrap;
}

/* “Filter:” pill ile yanındaki dropdown çok yapışmasın */
.myed-ct-surface .facets.small-hide:not(.facets-pill) .facets__heading{
  margin-right: 10px;
}

.myed-ct-surface .facets.small-hide:not(.facets-pill) > form{
  flex: 1 1 auto;
  min-width: 0;
}

.myed-ct-surface .facets.small-hide:not(.facets-pill) .product-count{
  margin-left: auto;
  flex: 0 0 auto;
}

.myed-ct-surface .facets.small-hide:not(.facets-pill) .product-count__text{
  margin: 0;
}

.myed-ct-surface .facets-container{
  position: relative;
  overflow: visible;
  border-radius: var(--myed-ct-radius);
  background: var(--myed-ct-glass-bg);
  border: 1px solid var(--myed-ct-glass-border);
  box-shadow: var(--myed-ct-glass-shadow);
}

.myed-ct-surface .facets-container::before{
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: inherit;
  background: var(--myed-ct-glass-frost);
}

@supports ((backdrop-filter: blur(1px))){
  .myed-ct-surface .facets-container::before{
    -webkit-backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
    backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
  }
}

.myed-ct-surface .facets-container > *{
  position: relative;
  z-index: 1;
}
.myed-ct-surface .facets__summary,
.myed-ct-surface .facet-filters__field .select,
.myed-ct-surface .facet-filters__sort{
  background: var(--myed-ct-chip-bg);
  border: 1px solid var(--myed-ct-glass-border);
  border-radius: var(--myed-ct-chip-radius);
  color: var(--myed-ct-text);
}
.myed-ct-surface .facets__summary{
  display:inline-flex;
  align-items:center;
  gap:0.5rem;
}
.myed-ct-surface .facet-filters__field .select{overflow:hidden;}
.myed-ct-surface .facets__summary .icon-caret,
.myed-ct-surface .facet-filters__field select,
.myed-ct-surface .facet-filters__sort{color: var(--myed-ct-text);}
.myed-ct-surface .facet-filters__field select,
.myed-ct-surface .select__select,
.myed-ct-surface select.facet-filters__sort{
  background: transparent;
  color: var(--myed-ct-text);
}
.myed-ct-surface .product-count,
.myed-ct-surface .product-count__text,
.myed-ct-surface .facet-filters__label,
.myed-ct-surface .facet-filters__label label,
.myed-ct-surface .facets__heading,
.myed-ct-surface .facets__summary,
.myed-ct-surface .facets__summary span,
.myed-ct-surface .facets__label,
.myed-ct-surface .facet-filters__sort{
  color: var(--myed-ct-text);
  opacity: 1;
}

.myed-ct-surface .facets__heading{
  display: inline-flex;
  align-items: center;
  padding: .6rem 1.2rem;
  border-radius: var(--myed-ct-chip-radius);
  background: var(--myed-ct-chip-bg);
  border: 1px solid var(--myed-ct-glass-border);
  color: var(--myed-ct-text);
  margin: 0;
}

.myed-ct-surface .facets.small-hide:not(.facets-pill) .facets__summary,
.myed-ct-surface .facets.small-hide:not(.facets-pill) .facet-filters__field .select,
.myed-ct-surface .facets.small-hide:not(.facets-pill) .facet-filters__sort{
  background: transparent;
  border: 0;
  box-shadow: none;
}

.myed-ct-surface .facets.small-hide:not(.facets-pill) .facets__summary:hover,
.myed-ct-surface .facets.small-hide:not(.facets-pill) .facet-filters__field .select:hover{
  background: rgba(255,255,255,0.08);
}

body.template-collection #main-collection-filters :is(.active-facets, .active-facets-mobile){
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:nowrap;
  overflow-x:auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  padding: 10px 0 0;
  margin: 0;
}
body.template-collection #main-collection-filters :is(.active-facets, .active-facets-mobile)::-webkit-scrollbar{
  display:none;
}

body.template-collection #main-collection-filters :is(.active-facets__button, .active-facets__clear, .active-facets__button-remove){
  display:inline-flex;
  align-items:center;
  gap:8px;
  height:34px;
  padding:0 12px;
  border-radius:999px;

  background: rgba(10,14,22, calc(var(--myed-ct-bg-alpha,0.55) + 0.18));
  border: 1px solid rgba(255,255,255, var(--myed-ct-border-alpha,0.14));

  color: rgba(var(--myed-ct-text-rgb,245,247,250),0.92) !important;
  text-decoration:none;
  white-space:nowrap;
}

body.template-collection #main-collection-filters .active-facets__button-inner{
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  padding: 0 !important;
  min-height: 0 !important;
  color: inherit !important;
  font: inherit !important;
  line-height: inherit !important;
  text-decoration: none !important;
}

body.template-collection #main-collection-filters :is(.active-facets__button, .active-facets__clear, .active-facets__button-remove) :is(svg,.icon){
  fill: currentColor;
  stroke: currentColor;
}

/* Facets dropdown panel */
.myed-ct-surface details.facets__disclosure[open] > .facets__display,
.myed-ct-surface details.disclosure-has-popup[open] > .facets__display,
.myed-ct-surface .facets__display{
  overflow: hidden;
  isolation: isolate;
  background: var(--myed-ct-glass-bg);
  border: 1px solid var(--myed-ct-glass-border);
  border-radius: 16px;
  box-shadow: var(--myed-ct-glass-shadow);
  color: var(--myed-ct-text);
}
.myed-ct-surface .facets__display::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background: var(--myed-ct-glass-frost);
}
@supports ((backdrop-filter: blur(1px))){
  .myed-ct-surface .facets__display::before{
    -webkit-backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
    backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
  }
}
.myed-ct-surface .facets__display > *{
  position: relative;
  z-index: 1;
}
.myed-ct-surface .facet-checkbox,
.myed-ct-surface .facet-checkbox__text,
.myed-ct-surface .facet-checkbox__count,
.myed-ct-surface .facets__selected,
.myed-ct-surface .facets__reset,
.myed-ct-surface .facets__button,
.myed-ct-surface .facets__price input,
.myed-ct-surface .facets__price label{
  color: var(--myed-ct-text);
}
.myed-ct-surface .facet-checkbox__count,
.myed-ct-surface .facets__price label{
  color: var(--myed-ct-muted);
}
.myed-ct-surface .facets__price input{
  background: rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,0.18);
  border-radius:10px;
}

/* Mobile facets drawer */
.myed-ct-surface .mobile-facets__inner,
.myed-ct-surface .mobile-facets__main,
.myed-ct-surface .mobile-facets__footer,
.myed-ct-surface .mobile-facets__header{
  background: var(--myed-ct-glass-bg);
  color: var(--myed-ct-text);
}
.myed-ct-surface .mobile-facets__inner{
  position: relative;
  overflow: hidden;
  isolation: isolate;
}
.myed-ct-surface .mobile-facets__inner::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background: var(--myed-ct-glass-frost);
}
@supports ((backdrop-filter: blur(1px))){
  .myed-ct-surface .mobile-facets__inner::before{
    -webkit-backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
    backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
  }
}
.myed-ct-surface .mobile-facets__inner > *{position:relative; z-index:1;}
.myed-ct-surface .mobile-facets,
.myed-ct-surface .mobile-facets *{color: var(--myed-ct-text);}
.myed-ct-surface .mobile-facets__close,
.myed-ct-surface .mobile-facets__label,
.myed-ct-surface .mobile-facets__summary,
.myed-ct-surface .mobile-facets__count,
.myed-ct-surface .mobile-facets__heading{color: var(--myed-ct-text);}
.myed-ct-surface .mobile-facets__overlay{background: rgba(0,0,0,0.35);}

.myed-ct-surface .mobile-facets,
.myed-ct-surface .mobile-facets select,
.myed-ct-surface .mobile-facets__sort select{
  color-scheme: dark;
}

/* MYED — FIX 02: Mobile sort dropdown readable */
.myed-ct-surface .mobile-facets__sort label{
  color: var(--myed-ct-muted);
}
.myed-ct-surface .mobile-facets__sort .select{
  background: var(--myed-ct-chip-bg);
  border: 1px solid var(--myed-ct-glass-border);
  border-radius: 14px;
}
.myed-ct-surface .mobile-facets__sort select{
  background: transparent;
  color: var(--myed-ct-text);
}
.myed-ct-surface .mobile-facets__sort .icon-caret{
  color: var(--myed-ct-text);
}
.myed-ct-surface #SortBy-mobile option,
.myed-ct-surface .mobile-facets__sort select option{
  background: #0a0e16;
  color: #f5f7fa;
}

/* Product card image safety */
.myed-ct-surface .card,
.myed-ct-surface .card__inner,
.myed-ct-surface .card__media,
.myed-ct-surface .card__media img{
  filter:none;
  -webkit-backdrop-filter:none;
  backdrop-filter:none;
}

/* Product card content glass */
.myed-ct-surface .card > .card__content{
  position: relative;
  overflow: hidden;
  isolation: isolate;
  border-radius:0 0 var(--myed-ct-radius) var(--myed-ct-radius);
  background: var(--myed-ct-glass-bg);
  border:1px solid var(--myed-ct-glass-border);
  box-shadow: var(--myed-ct-glass-shadow);
  color: var(--myed-ct-text);
}
.myed-ct-surface .card > .card__content::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background: var(--myed-ct-glass-frost);
}
@supports ((backdrop-filter: blur(1px))){
  .myed-ct-surface .card > .card__content::before{
    -webkit-backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
    backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
  }
}
.myed-ct-surface .card > .card__content > *{position:relative; z-index:1;}
.myed-ct-surface .card > .card__content .card__information{padding:0;}
.myed-ct-surface .card__heading,
.myed-ct-surface .card__heading a,
.myed-ct-surface .price,
.myed-ct-surface .price *,
.myed-ct-surface .card-information,
.myed-ct-surface .caption-with-letter-spacing,
.myed-ct-surface .caption-large{
  color: var(--myed-ct-text);
  opacity:1;
}
.myed-ct-surface .quick-add__submit{
  color: var(--myed-ct-text);
  border:1px solid rgba(255,255,255,0.18);
  background: rgba(255,255,255,0.10);
  border-radius: var(--myed-ct-chip-radius);
}
.myed-ct-surface .quick-add__submit:hover{
  background: rgba(255,255,255,0.16);
}
.myed-ct-surface select[id^="SortBy"] option,
.myed-ct-surface select.facet-filters__sort option{
  background:#0a0e16;
  color:#f5f7fa;
}

@media screen and (max-width:989px){
  .myed-ct-surface .myed-ct-toolbar,
  .myed-ct-surface .facets-container{
    padding:12px 14px;
    gap:12px;
  }
}

/* MYED — FIX 01 (MOBILE): Facets overlay/inner always above products (non-drawer layouts) */
@media screen and (max-width: 989px){
  body.template-collection .mobile-facets{
    z-index: 2147483000 !important;
  }

  body.template-collection .mobile-facets__wrapper .disclosure-has-popup[open] > summary::before{
    position: fixed !important;
    inset: 0 !important;
    z-index: 2147483001 !important;
    pointer-events: auto !important;
  }

  body.template-collection .mobile-facets__inner{
    z-index: 2147483002 !important;
    pointer-events: auto !important;
  }

  body.template-collection .mobile-facets__close,
  body.template-collection .mobile-facets__close-button{
    position: relative;
    z-index: 2147483003 !important;
    pointer-events: auto !important;
  }
}

/* MYED — FIX 02 (CANONICAL): Drawer mode always on top (ALL VIEWPORTS) */
body.template-collection .facets-container-drawer .mobile-facets{
  z-index: 2147483200 !important;
}

body.template-collection .facets-container-drawer .mobile-facets__wrapper .disclosure-has-popup[open] > summary::before{
  position: fixed !important;
  inset: 0 !important;
  z-index: 2147483201 !important;
  pointer-events: auto !important;
}

body.template-collection .facets-container-drawer .mobile-facets__inner{
  z-index: 2147483202 !important;
  pointer-events: auto !important;
}

body.template-collection .facets-container-drawer .mobile-facets__close,
body.template-collection .facets-container-drawer .mobile-facets__close-button{
  position: relative;
  z-index: 2147483203 !important;
  pointer-events: auto !important;
}
