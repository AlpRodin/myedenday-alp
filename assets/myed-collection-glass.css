/* ==========================================================================
  MyEdenDay — Collection Template Glass (Scoped)
  Scope: only .myed-ct-surface
========================================================================== */
:root{
  --myed-ct-radius: 22px;
  --myed-ct-chip-radius: 999px;
  --myed-ct-glass-shadow: 0 18px 40px rgba(0,0,0,0.28);
}

body.template-collection{
  --myed-ct-text-rgb: var(--myed-collection-foreground, 245, 247, 250);
}

.myed-ct-surface{
  --myed-ct-text: rgba(var(--myed-ct-text-rgb,245,247,250),0.92);
  --myed-ct-muted: rgba(var(--myed-ct-text-rgb,245,247,250),0.78);
  --myed-ct-glass-bg: rgba(10,14,22,var(--myed-ct-bg-alpha,0.55));
  --myed-ct-glass-frost: rgba(255,255,255,var(--myed-ct-frost-alpha,0.06));
  --myed-ct-glass-border: rgba(255,255,255,var(--myed-ct-border-alpha,0.14));
  --myed-ct-chip-bg: rgba(10,14,22,calc(var(--myed-ct-bg-alpha,0.55)*0.85));
  --myed-ct-glass-shadow: 0 18px 40px rgba(0,0,0,0.28);
}

.myed-ct-surface :is([class^="color-"], [class*=" color-"], .gradient){
  --color-foreground: var(--myed-ct-text-rgb);
}

/* Top controls bar */
.myed-ct-surface .myed-ct-toolbar{
  position: relative;
  overflow: visible;
  isolation: isolate;
  border-radius: var(--myed-ct-radius);
  background: var(--myed-ct-glass-bg);
  border: 1px solid var(--myed-ct-glass-border);
  box-shadow: var(--myed-ct-glass-shadow);
  padding: 14px 18px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}
.myed-ct-surface .myed-ct-toolbar::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background: var(--myed-ct-glass-frost);
}
@supports ((backdrop-filter: blur(1px))){
  .myed-ct-surface .myed-ct-toolbar::before{
    -webkit-backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
    backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
  }
}
.myed-ct-surface .myed-ct-toolbar > *{
  position: relative;
  z-index: 1;
  min-width: 0;
}

.myed-ct-surface .facets-container{
  position: relative;
  overflow: visible;
  border-radius: var(--myed-ct-radius);
  background: var(--myed-ct-glass-bg);
  border: 1px solid var(--myed-ct-glass-border);
  box-shadow: var(--myed-ct-glass-shadow);
}

.myed-ct-surface .facets-container::before{
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: inherit;
  background: var(--myed-ct-glass-frost);
}

@supports ((backdrop-filter: blur(1px))){
  .myed-ct-surface .facets-container::before{
    -webkit-backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
    backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
  }
}

.myed-ct-surface .facets-container > *{
  position: relative;
  z-index: 1;
}
.myed-ct-surface .facets__summary,
.myed-ct-surface .facet-filters__field .select,
.myed-ct-surface .facet-filters__sort{
  background: var(--myed-ct-chip-bg);
  border: 1px solid var(--myed-ct-glass-border);
  border-radius: var(--myed-ct-chip-radius);
  color: var(--myed-ct-text);
}
.myed-ct-surface .facets__summary{
  display:inline-flex;
  align-items:center;
  gap:0.5rem;
}
.myed-ct-surface .facet-filters__field .select{overflow:hidden;}
.myed-ct-surface .facets__summary .icon-caret,
.myed-ct-surface .facet-filters__field select,
.myed-ct-surface .facet-filters__sort{color: var(--myed-ct-text);}
.myed-ct-surface .facet-filters__field select,
.myed-ct-surface .select__select,
.myed-ct-surface select.facet-filters__sort{
  background: transparent;
  color: var(--myed-ct-text);
}
.myed-ct-surface .product-count,
.myed-ct-surface .product-count__text,
.myed-ct-surface .facet-filters__label,
.myed-ct-surface .facet-filters__label label,
.myed-ct-surface .facets__heading,
.myed-ct-surface .facets__summary,
.myed-ct-surface .facets__summary span,
.myed-ct-surface .facets__label,
.myed-ct-surface .facet-filters__sort{
  color: var(--myed-ct-text);
  opacity: 1;
}

.myed-ct-surface .facets__heading{
  display: inline-flex;
  align-items: center;
  padding: .6rem 1.2rem;
  border-radius: var(--myed-ct-chip-radius);
  background: var(--myed-ct-chip-bg);
  border: 1px solid var(--myed-ct-glass-border);
  color: var(--myed-ct-text);
  margin: 0;
}

body.template-collection #main-collection-filters :is(.active-facets, .active-facets-mobile){
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:nowrap;
  overflow-x:auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  padding: 10px 0 0;
  margin: 0;
}
body.template-collection #main-collection-filters :is(.active-facets, .active-facets-mobile)::-webkit-scrollbar{
  display:none;
}

body.template-collection #main-collection-filters :is(.active-facets__button, .active-facets__clear, .active-facets__button-remove){
  display:inline-flex;
  align-items:center;
  gap:8px;
  height:34px;
  padding:0 12px;
  border-radius:999px;

  background: var(--myed-fc-chip-bg, rgba(10,14,22, calc(var(--myed-ct-bg-alpha,0.55) + 0.18)));
  border: 1px solid var(--myed-fc-border, rgba(255,255,255, var(--myed-ct-border-alpha,0.14)));

  color: var(--myed-fc-chip-text, rgba(var(--myed-ct-text-rgb,245,247,250),0.92)) !important;
  text-decoration:none;
  white-space:nowrap;
}

body.template-collection #main-collection-filters .active-facets__button-inner{
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  padding: 0 !important;
  min-height: 0 !important;
  color: inherit !important;
  font: inherit !important;
  line-height: inherit !important;
  text-decoration: none !important;
}

body.template-collection #main-collection-filters :is(.active-facets__button, .active-facets__clear, .active-facets__button-remove) :is(svg,.icon){
  fill: currentColor;
  stroke: currentColor;
}

/* Facets dropdown panel */
.myed-ct-surface details.facets__disclosure[open] > .facets__display,
.myed-ct-surface details.disclosure-has-popup[open] > .facets__display,
.myed-ct-surface .facets__display{
  overflow-y: auto;
  overflow-x: hidden;
  isolation: isolate;
  background: var(--myed-ct-glass-bg);
  border: 1px solid var(--myed-ct-glass-border);
  border-radius: 16px;
  box-shadow: var(--myed-ct-glass-shadow);
  color: var(--myed-ct-text);
}
.myed-ct-surface .facets__list{
  max-height: none;
  overflow: visible;
  -webkit-overflow-scrolling: touch;
}
.myed-ct-surface .facets__display::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background: var(--myed-ct-glass-frost);
}
@supports ((backdrop-filter: blur(1px))){
  .myed-ct-surface .facets__display::before{
    -webkit-backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
    backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
  }
}
.myed-ct-surface .facets__display > *{
  position: relative;
  z-index: 1;
}
.myed-ct-surface .facet-checkbox,
.myed-ct-surface .facet-checkbox__text,
.myed-ct-surface .facet-checkbox__count,
.myed-ct-surface .facets__selected,
.myed-ct-surface .facets__reset,
.myed-ct-surface .facets__button,
.myed-ct-surface .facets__price input,
.myed-ct-surface .facets__price label{
  color: var(--myed-ct-text);
}
.myed-ct-surface .facet-checkbox__count,
.myed-ct-surface .facets__price label{
  color: var(--myed-ct-muted);
}
.myed-ct-surface .facets__price input{
  background: rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,0.18);
  border-radius:10px;
}

/* Mobile facets drawer */
.myed-ct-surface .mobile-facets__inner,
.myed-ct-surface .mobile-facets__main,
.myed-ct-surface .mobile-facets__footer,
.myed-ct-surface .mobile-facets__header{
  background: var(--myed-fc-bg, var(--myed-ct-glass-bg));
  color: var(--myed-fc-text, var(--myed-ct-text));
}
.myed-ct-surface .mobile-facets__inner{
  position: relative;
  overflow-y: auto;
  overflow-x: hidden;
  isolation: isolate;
}
.myed-ct-surface .mobile-facets__inner::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background: var(--myed-ct-glass-frost);
}
@supports ((backdrop-filter: blur(1px))){
  .myed-ct-surface .mobile-facets__inner::before{
    -webkit-backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
    backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
  }
}
.myed-ct-surface .mobile-facets__inner > *{position:relative; z-index:1;}
.myed-ct-surface .mobile-facets,
.myed-ct-surface .mobile-facets *{color: var(--myed-ct-text);}
.myed-ct-surface .mobile-facets__close,
.myed-ct-surface .mobile-facets__label,
.myed-ct-surface .mobile-facets__summary,
.myed-ct-surface .mobile-facets__count,
.myed-ct-surface .mobile-facets__heading{color: var(--myed-ct-text);}
.myed-ct-surface .mobile-facets__overlay{background: rgba(0,0,0,0.35);}

.myed-ct-surface .mobile-facets,
.myed-ct-surface .mobile-facets select,
.myed-ct-surface .mobile-facets__sort select{
  color-scheme: dark;
}

/* MYED — FIX 02: Mobile sort dropdown readable */
.myed-ct-surface .mobile-facets__sort label{
  color: var(--myed-ct-muted);
}
.myed-ct-surface .mobile-facets__sort .select{
  background: var(--myed-ct-chip-bg);
  border: 1px solid var(--myed-ct-glass-border);
  border-radius: 14px;
}
.myed-ct-surface .mobile-facets__sort select{
  background: transparent;
  color: var(--myed-ct-text);
}
.myed-ct-surface .mobile-facets__sort .icon-caret{
  color: var(--myed-ct-text);
}
.myed-ct-surface #SortBy-mobile option,
.myed-ct-surface .mobile-facets__sort select option{
  background: #0a0e16;
  color: #f5f7fa;
}

/* Product card image safety */
.myed-ct-surface .card,
.myed-ct-surface .card__inner,
.myed-ct-surface .card__media,
.myed-ct-surface .card__media img{
  filter:none;
  -webkit-backdrop-filter:none;
  backdrop-filter:none;
}

/* Product card content glass */
.myed-ct-surface .card > .card__content{
  position: relative;
  overflow: hidden;
  isolation: isolate;
  border-radius:0 0 var(--myed-ct-radius) var(--myed-ct-radius);
  background: var(--myed-ct-glass-bg);
  border:1px solid var(--myed-ct-glass-border);
  box-shadow: var(--myed-ct-glass-shadow);
  color: var(--myed-ct-text);
}
.myed-ct-surface .card > .card__content::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background: var(--myed-ct-glass-frost);
}
@supports ((backdrop-filter: blur(1px))){
  .myed-ct-surface .card > .card__content::before{
    -webkit-backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
    backdrop-filter: blur(var(--myed-ct-blur,14px)) saturate(120%);
  }
}
.myed-ct-surface .card > .card__content > *{position:relative; z-index:1;}
.myed-ct-surface .card > .card__content .card__information{padding:0;}
.myed-ct-surface .card__heading,
.myed-ct-surface .card__heading a,
.myed-ct-surface .price,
.myed-ct-surface .price *,
.myed-ct-surface .card-information,
.myed-ct-surface .caption-with-letter-spacing,
.myed-ct-surface .caption-large{
  color: var(--myed-ct-text);
  opacity:1;
}
.myed-ct-surface .quick-add__submit{
  color: var(--myed-ct-text);
  border:1px solid rgba(255,255,255,0.18);
  background: rgba(255,255,255,0.10);
  border-radius: var(--myed-ct-chip-radius);
}
.myed-ct-surface .quick-add__submit:hover{
  background: rgba(255,255,255,0.16);
}
.myed-ct-surface select[id^="SortBy"] option,
.myed-ct-surface select.facet-filters__sort option{
  background:#0a0e16;
  color:#f5f7fa;
}

@media screen and (max-width:989px){
  .myed-ct-surface .myed-ct-toolbar,
  .myed-ct-surface .facets-container{
    padding:12px 14px;
    gap:12px;
  }
}

/* ==========================================================================
  MyEdenDay — Facets Canonical Layout (Scoped, No Overflow)
  Scope: ONLY .myed-ct-surface
  Goal: “ip gibi” bar, no clipping, no global impact
========================================================================== */

/* Give the facets container real padding so right-side text never clips */
.myed-ct-surface .facets-container{
  padding: 16px 18px;
  box-sizing: border-box;
}

/* Reduce Dawn’s aggressive min-width + remove huge top margin */
.myed-ct-surface .facet-filters__summary{
  min-width: clamp(160px, 18vw, 240px);
  margin-top: 0;
  height: 40px;
}

/* Align Filter controls to center (Dawn uses flex-start) */
.myed-ct-surface .facet-filters{
  align-items: center;
  padding-left: 1.25rem;
}

/* Prevent labels/count from being chopped */
.myed-ct-surface .product-count__text,
.myed-ct-surface .facet-filters__label,
.myed-ct-surface .facets__heading{
  white-space: nowrap;
}

/* Don’t let dropdown panel force weird overflow on the bar */
.myed-ct-surface .facets__display{
  width: clamp(240px, 32vw, 360px);
  left: 0; /* remove Dawn’s negative left that can collide with your glass edges */
}

/* Keep active facets on one line without pushing layout: scroll inside */
body.template-collection #main-collection-filters :is(.active-facets, .active-facets-mobile){
  flex-wrap: nowrap;
  overflow-x: auto;
  max-width: 100%;
}

/* Make sure no parent clips the right side */
.myed-ct-surface .facets-container,
.myed-ct-surface #main-collection-filters{
  overflow: visible;
}

/* ==========================================================================
  MYED — Collection Drawer MUST overlay Header (Scoped)
  Scope: body.template-collection only
  Goal: mobile/tablet/desktop drawer always above header
========================================================================== */

/* 0) Keep header safely below drawer on collection pages */
body.template-collection :is(
  .shopify-section-header,
  .section-header,
  [id^="shopify-section-"][id*="__header"]
){
  z-index: 2000 !important; /* still above normal content */
}

/* 1) Force drawer overlay ABOVE everything */
body.template-collection .myed-ct-surface .mobile-facets{
  position: fixed !important;
  inset: 0 !important;
  z-index: 2147483646 !important; /* above any sane header */
}

/* 2) Ensure the click-overlay pseudo layer is also on top */
body.template-collection .myed-ct-surface .mobile-facets__wrapper
  .disclosure-has-popup[open] > summary::before{
  position: fixed !important;
  inset: 0 !important;
  z-index: 2147483645 !important;
}

/* 3) Ensure panel + close button are above overlay */
body.template-collection .myed-ct-surface .mobile-facets__inner{
  position: fixed !important;
  top: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  height: 100vh !important;
  z-index: 2147483646 !important;
}

body.template-collection .myed-ct-surface details.menu-opening .mobile-facets__close{
  position: fixed !important;
  z-index: 2147483647 !important;
}

/* 4) If a transform/filter ancestor is trapping fixed positioning, remove it ONLY while drawer is open */
@supports selector(:has(*)){
  body.template-collection:has(.facets-container-drawer details.menu-opening) :is(
    #MainContent,
    .content-for-layout,
    .myed-ct-surface
  ){
    transform: none !important;
    filter: none !important;
  }
}
