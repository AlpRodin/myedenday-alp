/* ======================================================================
  MyEdenDay — Search Glass (DRAWER ONLY) — SINGLE FILE
  File: assets/myed-search-glass.css

  Goals (Search):
  - Predictive dropdown never falls behind footer
  - Drawer-only facets UX: one long pill bar (Filter + Sort + Count)
  - Drawer styling controlled by Theme Editor sliders
====================================================================== */

/* ==========================================================
   0) /search short/empty stable height
========================================================== */
body.template-search .template-search.template-search--empty{ min-height: 100vh; }
@supports (height: 100dvh){
  body.template-search .template-search.template-search--empty{ min-height: 100dvh; }
}

/* ==========================================================
   1) Disable clipping so predictive isn’t cut
========================================================== */
body.template-search .template-search,
body.template-search .template-search__header,
body.template-search .template-search__search,
body.template-search .template-search__search .field{ overflow: visible !important; }

/* ==========================================================
   2) /search predictive: keep in flow (no stacking race)
   Scope only the template search input
========================================================== */
body.template-search .template-search__search predictive-search{ position: relative; display:block; }
body.template-search .template-search__search .predictive-search--search-template{
  position: relative !important;
  left: auto !important;
  right: auto !important;
  top: auto !important;
  margin-top: 10px;
  z-index: 5 !important;

  max-height: min(60vh, 48rem);
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* ==========================================================
   3) When input focused, reserve space for predictive
========================================================== */
body.template-search .template-search__header:focus-within{ padding-bottom: min(60vh, 48rem); }

/* ==========================================================
   4) Variables & base stacking
   NOTE: section sets these vars on body.template-search
========================================================== */
body.template-search{
  --myed-sg-bg-rgb: 10,14,22;
  --myed-sg-radius: 22px;
  --myed-sg-pill-radius: 999px;
  --myed-sg-shadow: 0 18px 40px rgba(0,0,0,0.28);
}

body.template-search #main-search-filters{ position: relative; z-index: 60; }
body.template-search #ProductGridContainer{ position: relative; z-index: 1; }

/* ==========================================================
   5) Header/search glass
========================================================== */
body.template-search .template-search{ position: relative; z-index: 0; }

body.template-search .template-search .facets-wrapper{ margin-top: 18px; }

body.template-search .template-search__header.page-width{
  position: relative;
  z-index: 20;

  background: rgba(var(--myed-sg-bg-rgb), var(--myed-sg-bg-alpha, 0.55));
  border: 1px solid rgba(255,255,255, var(--myed-sg-border-alpha, 0.14));
  border-radius: var(--myed-sg-radius);
  -webkit-backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
  backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
  padding: 22px;

  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
}
body.template-search .template-search__header.page-width :is(h1,h2,h3,p,span,small,label,a){
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
}

body.template-search .template-search__search{ position: relative; z-index: 30; }
body.template-search .template-search__search .field{
  position: relative;
  background: rgba(var(--myed-sg-bg-rgb), calc(var(--myed-sg-bg-alpha,0.55) + 0.07));
  border: 1px solid rgba(255,255,255, 0.16);
  border-radius: 14px;
  -webkit-backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
  backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
}
body.template-search .template-search__search .field__input{ background: transparent; color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92); }
body.template-search .template-search__search .field__label{ color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.65); }
body.template-search .template-search__search :is(.reset__button, .search__button){ color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.85); }
body.template-search .template-search__search :is(.reset__button, .search__button) :is(svg, .icon){ fill: currentColor; stroke: currentColor; }

body.template-search .template-search__search .predictive-search--search-template{
  background: rgba(var(--myed-sg-bg-rgb), 0.97);
  border: 1px solid rgba(255,255,255, var(--myed-sg-border-alpha, 0.14));
  border-radius: 14px;
  box-shadow: var(--myed-sg-shadow);
  -webkit-backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
  backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
}
body.template-search .template-search .predictive-search :is(a,p,span,small,strong,li,div){
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
}

/* ==========================================================
   6) DRAWER CONTROL BAR (one long pill)
========================================================== */
body.template-search #main-search-filters .myed-sg-controlbar{
  position: relative;
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 0 16px;
  min-height: 48px;
  flex-wrap: wrap;
}
body.template-search #main-search-filters .myed-sg-controlbar::before{
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  height: 48px;
  border-radius: var(--myed-sg-pill-radius, 999px);
  background: rgba(var(--myed-sg-bg-rgb), var(--myed-sg-bar-alpha, 0.55));
  border: 1px solid rgba(255,255,255, var(--myed-sg-bar-border-alpha, 0.16));
  box-shadow: var(--myed-sg-shadow);
  -webkit-backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
  backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
  z-index: 0;
  pointer-events: none;
}
body.template-search #main-search-filters .myed-sg-controlbar > *{
  position: relative;
  z-index: 1;
}
body.template-search #main-search-filters .myed-sg-controlbar #FacetsWrapperDesktop{
  flex: 1 1 auto;
  min-width: 0;
}
body.template-search #main-search-filters .myed-sg-controlbar .myed-sg-right{
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 14px;
}
body.template-search #main-search-filters .myed-sg-controlbar .myed-sg-right .facet-filters,
body.template-search #main-search-filters .myed-sg-controlbar .myed-sg-right .product-count{
  margin: 0 !important;
  padding: 0 !important;
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
}
body.template-search #main-search-filters .myed-sg-controlbar .myed-sg-right :is(
  .facet-filters__label,
  .facet-filters__sort,
  .product-count__text,
  .facet-filters__field label,
  .facet-filters__field span
){
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92) !important;
}

body.template-search #main-search-filters .facets-container-drawer{
  position: relative;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 14px;
  padding: 0 16px;
  min-height: 48px;
}
body.template-search #main-search-filters .facets-container-drawer::before{
  content: "";
  position: absolute;
  left: 0; right: 0;
  top: 0;
  height: 48px;

  border-radius: var(--myed-sg-pill-radius, 999px);
  background: rgba(var(--myed-sg-bg-rgb), var(--myed-sg-bar-alpha, 0.55));
  border: 1px solid rgba(255,255,255, var(--myed-sg-bar-border-alpha, 0.16));
  box-shadow: var(--myed-sg-shadow);
  -webkit-backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
  backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
  z-index: 0;

  pointer-events: none;
}
body.template-search #main-search-filters .facets-container-drawer > *{
  position: relative;
  z-index: 1;
}

body.template-search #main-search-filters .facets-container-drawer > menu-drawer{
  order: 10;
  flex: 1 1 auto;
  min-width: 0;
}

body.template-search #main-search-filters .facets-container-drawer > .myed-sg-drawer-right{
  order: 20;
  margin-left: auto;
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  gap: 14px;
  min-height: 48px;
}

body.template-search #main-search-filters .facets-container-drawer > .active-facets-mobile{
  order: 30;
  flex: 0 0 100%;
}

body.template-search #main-search-filters .facets-container-drawer > .facets-pill{
  order: 40;
  flex: 0 0 100%;
}

/* Flatten Filter trigger inside the bar */
body.template-search #main-search-filters .facets-container-drawer .mobile-facets__open{
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  padding: 0 !important;
  min-height: 48px;
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
}
body.template-search #main-search-filters .facets-container-drawer .mobile-facets__open :is(svg,.icon){
  fill: currentColor;
  stroke: currentColor;
}
body.template-search #main-search-filters .facets-container-drawer .mobile-facets__open-wrapper{
  display: inline-flex;
  align-items: center;
  min-height: 48px;
}
body.template-search #main-search-filters .facets-container-drawer :is(
  .facet-filters__label,
  .facet-filters__sort,
  .product-count__text,
  .facet-filters__field label,
  .facet-filters__field span
){
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92) !important;
}

/* Sorting + count inside right group (no extra pills) */
body.template-search #main-search-filters .myed-sg-drawer-right .facet-filters.sorting,
body.template-search #main-search-filters .myed-sg-drawer-right .product-count{
  margin: 0 !important;
  padding: 0 !important;
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
}
body.template-search #main-search-filters .myed-sg-drawer-right .facet-filters__field{ display:flex; align-items:center; gap:10px; }
body.template-search #main-search-filters .myed-sg-drawer-right .facet-filters__label{ margin:0 !important; white-space:nowrap; opacity:0.85; }

body.template-search #main-search-filters .myed-sg-drawer-right .facet-filters__field .select__select{
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  border-radius: 999px;
  padding: 6px 34px 6px 10px;
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
  color-scheme: dark;
}
body.template-search #main-search-filters .myed-sg-drawer-right .facet-filters__field .select__select option{
  background: rgb(var(--myed-sg-bg-rgb));
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
}

body.template-search #main-search-filters .myed-sg-drawer-right .product-count__text{ margin: 0 !important; white-space: nowrap; }

/* ======================================================================
   MyEdenDay — Search Drawer FIX (search-only, safe targets)
   Fixes: white header, missing X, unreadable text/inputs, gradient bleed
====================================================================== */

body.template-search .template-search .mobile-facets{
  z-index: 5000 !important;
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
}

body.template-search .template-search .mobile-facets :is(svg,.icon){
  fill: currentColor !important;
  stroke: currentColor !important;
}

/* Overlay (darkness) */
body.template-search .template-search .mobile-facets__wrapper
  .disclosure-has-popup[open] > summary::before{
  background: rgba(0,0,0, var(--myed-sg-drawer-overlay-alpha,0.58)) !important;
}

/* SEARCH-ONLY Drawer Paint */
body.template-search :is(
  .mobile-facets__inner,
  .mobile-facets__main,
  .mobile-facets__header,
  .mobile-facets__footer,
  .menu-drawer__inner-container,
  .menu-drawer__navigation-container,
  .menu-drawer__header,
  .menu-drawer__footer
){
  --color-background: var(--myed-sg-bg-rgb, 10,14,22);
  --color-foreground: var(--myed-sg-fg-rgb, 245,247,250);
  --gradient-background: rgba(var(--myed-sg-bg-rgb,10,14,22), var(--myed-sg-drawer-alpha,0.90));
  background: rgba(var(--myed-sg-bg-rgb,10,14,22), var(--myed-sg-drawer-alpha,0.90)) !important;
  background-image: none !important;
  color: rgba(var(--myed-sg-fg-rgb,245,247,250),0.92) !important;
}

body.template-search :is(
  .mobile-facets__inner,
  .mobile-facets__main,
  .mobile-facets__header,
  .mobile-facets__footer,
  .menu-drawer__inner-container,
  .menu-drawer__navigation-container,
  .menu-drawer__header,
  .menu-drawer__footer
) :is(svg, .icon){
  fill: rgba(var(--myed-sg-fg-rgb,245,247,250),0.92) !important;
  stroke: rgba(var(--myed-sg-fg-rgb,245,247,250),0.92) !important;
  color: rgba(var(--myed-sg-fg-rgb,245,247,250),0.92) !important;
}

body.template-search .mobile-facets__close{
  position: relative;
  z-index: 5010 !important;
  color: rgba(var(--myed-sg-fg-rgb,245,247,250),0.92) !important;
  background: transparent !important;
}

/* Kill Dawn "gradient" whites inside drawer */
body.template-search .template-search .mobile-facets :is(.color-background-1, .color-background-2){
  background: transparent !important;
  background-image: none !important;
}

body.template-search .template-search :is(
  .mobile-facets__inner.gradient,
  .mobile-facets__main.gradient,
  .mobile-facets__header.gradient,
  .mobile-facets__footer.gradient,
  .mobile-facets__details.gradient,
  .mobile-facets__submenu.gradient
){
  background: rgba(var(--myed-sg-bg-rgb,10,14,22), var(--myed-sg-drawer-alpha,0.92)) !important;
  background-image: none !important;
}

/* Drawer surfaces INCLUDING HEADER (your missing piece) */
body.template-search .template-search :is(
  .mobile-facets__inner,
  .mobile-facets__main,
  .mobile-facets__header,
  .mobile-facets__footer,
  .mobile-facets__details,
  .mobile-facets__submenu
){
  --color-background: var(--myed-sg-bg-rgb, 10,14,22);
  --color-foreground: var(--myed-sg-fg-rgb, 245,247,250);
  --gradient-background: rgba(var(--myed-sg-bg-rgb,10,14,22), var(--myed-sg-drawer-alpha,0.92));
  background: rgba(var(--myed-sg-bg-rgb,10,14,22), var(--myed-sg-drawer-alpha,0.92)) !important;
  background-image: none !important;
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92) !important;
  color-scheme: dark;
}

/* X button visibility (was disappearing) */
body.template-search .template-search .mobile-facets__close{
  position: relative;
  z-index: 5010 !important;
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92) !important;
  background: transparent !important;
}

/* Links/labels/text inside drawer */
body.template-search .template-search .mobile-facets__inner :is(a,button,label,span,p,h1,h2,h3,summary){
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92) !important;
}

/* Inputs (Price etc.) */
body.template-search .template-search .mobile-facets :is(input,select,textarea){
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92) !important;
}

body.template-search .template-search .mobile-facets :is(input::placeholder,textarea::placeholder){
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.55) !important;
}

body.template-search .template-search .mobile-facets :is(input[type="number"], input[type="text"], .field__input){
  background: rgba(var(--myed-sg-bg-rgb,10,14,22), 0.55) !important;
  border: 1px solid rgba(255,255,255, 0.18) !important;
  border-radius: 14px;
  -webkit-backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
  backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
}

/* ==========================================================
   8) Product card readability (search only)
========================================================== */
body.template-search .template-search :is(.card__heading, .price, .price-item){
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
}
body.template-search .template-search .card > .card__content{
  background: rgba(var(--myed-sg-bg-rgb), var(--myed-sg-bg-alpha, 0.55));
  border: 1px solid rgba(255,255,255, var(--myed-sg-border-alpha, 0.14));
  border-radius: 0 0 var(--myed-sg-radius) var(--myed-sg-radius);
  box-shadow: var(--myed-sg-shadow);
}

@media (max-width: 989px){
  body.template-search .template-search__search .predictive-search--search-template{
    max-height: min(52vh, 40rem);
  }
}

/* ======================================================================
   MyEdenDay — SEARCH-ONLY Drawer Paint (Dawn menu-drawer katman fix)
   Scope: ONLY body.template-search
   Goals:
   - Drawer header dahil beyaz kalmasın
   - X (close) görünür olsun
   - Metin/ikonlar okunur olsun
====================================================================== */
body.template-search :is(
  .mobile-facets__inner,
  .mobile-facets__main,
  .mobile-facets__header,
  .mobile-facets__footer,
  .menu-drawer__inner-container,
  .menu-drawer__navigation-container,
  .menu-drawer__header,
  .menu-drawer__footer
){
  --color-background: var(--myed-sg-bg-rgb, 10,14,22);
  --color-foreground: var(--myed-sg-fg-rgb, 245,247,250);
  --gradient-background: rgba(var(--myed-sg-bg-rgb,10,14,22), var(--myed-sg-drawer-alpha,0.90));

  background: rgba(var(--myed-sg-bg-rgb,10,14,22), var(--myed-sg-drawer-alpha,0.90)) !important;
  background-image: none !important;
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92) !important;
  color-scheme: dark;
}

body.template-search :is(
  .mobile-facets__inner,
  .mobile-facets__main,
  .mobile-facets__header,
  .mobile-facets__footer,
  .menu-drawer__inner-container,
  .menu-drawer__navigation-container
) :is(a, button, label, span, p, h1, h2, h3, summary, input, select){
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92) !important;
}

body.template-search :is(
  .mobile-facets,
  .menu-drawer
) :is(svg, .icon){
  fill: currentColor !important;
  stroke: currentColor !important;
}

/* Close (X) görünürlüğü */
body.template-search :is(.mobile-facets__close, .menu-drawer__close){
  position: relative;
  z-index: 6000 !important;
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92) !important;
  background: transparent !important;
}
