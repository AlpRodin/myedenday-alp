/* ======================================================================
  MyEdenDay — Search Glass (CANONICAL v4) — DRAWER ONLY — SINGLE FILE
  File: assets/myed-search-glass.css

  Goals (Search):
  - Predictive dropdown never falls behind footer OR filter bar
  - Drawer-only facets UX: one long pill bar (Filter + Sort + Count)
  - Active facets row as pills (includes "Alle entfernen")
  - Drawer always above header
====================================================================== */

/* ==========================================================
   0) /search short/empty stable height
========================================================== */
body.template-search .template-search.template-search--empty{ min-height: 100vh; }
@supports (height: 100dvh){
  body.template-search .template-search.template-search--empty{ min-height: 100dvh; }
}

/* ==========================================================
   1) Disable clipping so predictive isn’t cut
========================================================== */
body.template-search .template-search,
body.template-search .template-search__header,
body.template-search .template-search__search,
body.template-search .template-search__search .field{ overflow: visible !important; }

/* ==========================================================
   2) /search predictive: anchored to the input field
========================================================== */
body.template-search .template-search__search predictive-search{ position: relative; display:block; }
body.template-search .template-search__search .field{ position: relative; }

body.template-search .template-search__search .predictive-search--search-template{
  position: absolute !important;
  left: 0 !important;
  right: 0 !important;
  top: calc(100% + 10px) !important;
  margin-top: 0 !important;
  z-index: 122 !important;

  max-height: min(60vh, 48rem);
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* Predictive açıkken header katmanı filtre barın üstüne çıksın */
body.template-search .template-search__header.page-width:focus-within{ z-index: 120; }
body.template-search .template-search__header.page-width:focus-within .template-search__search{ z-index: 121; }

/* ==========================================================
   3) Variables & base stacking
========================================================== */
body.template-search{
  --myed-sg-bg-rgb: 10,14,22;
  --myed-sg-radius: 22px;
  --myed-sg-pill-radius: 999px;
  --myed-sg-shadow: 0 18px 40px rgba(0,0,0,0.28);
}

body.template-search #main-search-filters{ position: relative; z-index: 60; }
body.template-search #ProductGridContainer{ position: relative; z-index: 1; }

/* ==========================================================
   4) Header/search glass
========================================================== */
body.template-search .template-search{ position: relative; z-index: 0; }
body.template-search .template-search .facets-wrapper{ margin-top: 18px; }

body.template-search .template-search__header.page-width{
  position: relative;
  z-index: 20;

  background: rgba(var(--myed-sg-bg-rgb), var(--myed-sg-bg-alpha, 0.55));
  border: 1px solid rgba(255,255,255, var(--myed-sg-border-alpha, 0.14));
  border-radius: var(--myed-sg-radius);
  -webkit-backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
  backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
  padding: 22px;

  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
}
body.template-search .template-search__header.page-width :is(h1,h2,h3,p,span,small,label,a){
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
}

body.template-search .template-search__search{ position: relative; z-index: 30; }
body.template-search .template-search__search .field{
  position: relative;
  background: rgba(var(--myed-sg-bg-rgb), calc(var(--myed-sg-bg-alpha,0.55) + 0.07));
  border: 1px solid rgba(255,255,255, 0.16);
  border-radius: 14px;
  -webkit-backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
  backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
}
body.template-search .template-search__search .field__input{ background: transparent; color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92); }
body.template-search .template-search__search .field__label{ color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.65); }
body.template-search .template-search__search :is(.reset__button, .search__button){ color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.85); }
body.template-search .template-search__search :is(.reset__button, .search__button) :is(svg, .icon){ fill: currentColor; stroke: currentColor; }

body.template-search .template-search__search .predictive-search--search-template{
  background: rgba(var(--myed-sg-bg-rgb), 0.97);
  border: 1px solid rgba(255,255,255, var(--myed-sg-border-alpha, 0.14));
  border-radius: 14px;
  box-shadow: var(--myed-sg-shadow);
  -webkit-backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
  backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
}
body.template-search .template-search .predictive-search :is(a,p,span,small,strong,li,div){
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
}

/* ==========================================================
   5) DRAWER CONTROL BAR (one long pill)
========================================================== */
body.template-search #main-search-filters .facets-container-drawer{
  position: relative;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 14px;
  padding: 0 16px;
  min-height: 48px;
}
body.template-search #main-search-filters .facets-container-drawer::before{
  content: "";
  position: absolute;
  left: 0; right: 0;
  top: 0;
  height: 48px;

  border-radius: var(--myed-sg-pill-radius, 999px);
  background: rgba(var(--myed-sg-bg-rgb), var(--myed-sg-bar-alpha, 0.55));
  border: 1px solid rgba(255,255,255, var(--myed-sg-bar-border-alpha, 0.16));
  box-shadow: var(--myed-sg-shadow);
  -webkit-backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
  backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
  z-index: 0;

  pointer-events: none;
}
body.template-search #main-search-filters .facets-container-drawer > *{
  position: relative;
  z-index: 1;
}

body.template-search #main-search-filters .facets-container-drawer > menu-drawer{
  order: 10;
  flex: 1 1 auto;
  min-width: 0;
}

body.template-search #main-search-filters .facets-container-drawer > .myed-sg-drawer-right{
  order: 20;
  margin-left: auto;
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  gap: 14px;
  min-height: 48px;
}

body.template-search #main-search-filters .facets-container-drawer > .active-facets-mobile{
  order: 30;
  flex: 0 0 100%;
}

body.template-search #main-search-filters .facets-container-drawer > .facets-pill{
  order: 40;
  flex: 0 0 100%;
}

/* Flatten Filter trigger inside the bar */
body.template-search #main-search-filters .facets-container-drawer .mobile-facets__open{
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  padding: 0 !important;
  min-height: 48px;
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
}
body.template-search #main-search-filters .facets-container-drawer .mobile-facets__open :is(svg,.icon){
  fill: currentColor;
  stroke: currentColor;
}
body.template-search #main-search-filters .facets-container-drawer .mobile-facets__open-wrapper{
  display: inline-flex;
  align-items: center;
  min-height: 48px;
}

/* Sorting + count inside right group */
body.template-search #main-search-filters .myed-sg-drawer-right .facet-filters.sorting,
body.template-search #main-search-filters .myed-sg-drawer-right .product-count{
  margin: 0 !important;
  padding: 0 !important;
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
}
body.template-search #main-search-filters .myed-sg-drawer-right .facet-filters__field{ display:flex; align-items:center; gap:10px; }
body.template-search #main-search-filters .myed-sg-drawer-right .facet-filters__label{ margin:0 !important; white-space:nowrap; opacity:0.85; }

body.template-search #main-search-filters .myed-sg-drawer-right .facet-filters__field .select__select{
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  border-radius: 999px;
  padding: 6px 34px 6px 10px;
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
  color-scheme: dark;
}
body.template-search #main-search-filters .myed-sg-drawer-right .facet-filters__field .select__select option{
  background: rgb(var(--myed-sg-bg-rgb));
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
}
body.template-search #main-search-filters .myed-sg-drawer-right .product-count__text{ margin: 0 !important; white-space: nowrap; }

/* ==========================================================
   6) Active facets row as pills (includes "Alle entfernen")
========================================================== */
body.template-search #main-search-filters :is(.active-facets, .active-facets-mobile){
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: nowrap;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  padding: 10px 16px 0;
  margin: 0;
}
body.template-search #main-search-filters :is(.active-facets, .active-facets-mobile)::-webkit-scrollbar{ display: none; }

body.template-search #main-search-filters :is(.active-facets__button, .active-facets__clear, .active-facets__button-remove){
  display: inline-flex;
  align-items: center;
  gap: 8px;

  height: 34px;
  padding: 0 12px;
  border-radius: 999px;

  background: rgba(var(--myed-sg-bg-rgb), calc(var(--myed-sg-bar-alpha, 0.55) + 0.18));
  border: 1px solid rgba(255,255,255, var(--myed-sg-bar-border-alpha, 0.16));

  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
  text-decoration: none;
  white-space: nowrap;
}

/* Dawn iç butonun siyah/varsayılan stilini sıfırla */
body.template-search #main-search-filters .active-facets__button-inner{
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  padding: 0 !important;
  min-height: 0 !important;
  color: inherit !important;
  font: inherit !important;
  line-height: inherit !important;
  text-decoration: none !important;
}

body.template-search #main-search-filters :is(.active-facets__button, .active-facets__clear, .active-facets__button-remove) :is(svg,.icon){
  fill: currentColor;
  stroke: currentColor;
}

/* ==========================================================
   7) Drawer panel (menu-drawer) styling + visibility fixes
========================================================== */
body.template-search .template-search .mobile-facets{ z-index: 20000 !important; color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92); }
body.template-search .template-search .mobile-facets :is(svg,.icon){ fill: currentColor; stroke: currentColor; }
body.template-search .template-search .mobile-facets__wrapper{ position: relative; z-index: 20001 !important; }

body.template-search .template-search .mobile-facets__wrapper .disclosure-has-popup[open] > summary::before{
  z-index: 19990 !important;
  background: rgba(0,0,0, var(--myed-sg-drawer-overlay-alpha, 0.58));
}

body.template-search .template-search .mobile-facets__close{
  position: relative;
  z-index: 20010 !important;
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
}

body.template-search .template-search :is(
  .mobile-facets__inner,
  .mobile-facets__main,
  .mobile-facets__submenu,
  .mobile-facets__footer
){
  background: rgba(var(--myed-sg-bg-rgb), var(--myed-sg-drawer-alpha, 0.92)) !important;
  background-image: none !important;
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
  color-scheme: dark;
}

body.template-search .template-search .mobile-facets__inner{
  border-left: 1px solid rgba(255,255,255, 0.16);
  box-shadow: var(--myed-sg-shadow);
  -webkit-backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
  backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
}
body.template-search .template-search .mobile-facets__footer{ border-top: 1px solid rgba(255,255,255, var(--myed-sg-border-alpha, 0.14)); }
body.template-search .template-search .mobile-facets__submenu{ border-left: 1px solid rgba(255,255,255, var(--myed-sg-border-alpha, 0.14)); }
body.template-search .template-search .mobile-facets__highlight{ background-color: rgba(255,255,255, 0.10); }

body.template-search .template-search .mobile-facets__inner :is(a,button,label,span,p,h2,h3){
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
}

/* Inputs visibility */
body.template-search .template-search .mobile-facets :is(input,select,textarea){
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
}
body.template-search .template-search .mobile-facets :is(input::placeholder,textarea::placeholder){
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.55);
}
body.template-search .template-search .mobile-facets :is(.field__input, input[type="number"], input[type="text"]){
  background: rgba(var(--myed-sg-bg-rgb), 0.55) !important;
  border: 1px solid rgba(255,255,255, 0.18) !important;
  border-radius: 14px;
  -webkit-backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
  backdrop-filter: blur(var(--myed-sg-blur,14px)) saturate(120%);
}

/* ==========================================================
   8) Product card readability (search only)
========================================================== */
body.template-search .template-search :is(.card__heading, .price, .price-item){
  color: rgba(var(--myed-sg-fg-rgb,245,247,250), 0.92);
}
body.template-search .template-search .card > .card__content{
  background: rgba(var(--myed-sg-bg-rgb), var(--myed-sg-bg-alpha, 0.55));
  border: 1px solid rgba(255,255,255, var(--myed-sg-border-alpha, 0.14));
  border-radius: 0 0 var(--myed-sg-radius) var(--myed-sg-radius);
  box-shadow: var(--myed-sg-shadow);
}

/* ==========================================================
   9) Drawer açıkken header arkaya insin (Search only)
========================================================== */
body.template-search:is(.overflow-hidden, .overflow-hidden-tablet, .overflow-hidden-mobile)
:where(.header-wrapper, header.myed-glass-header, .myed-glass-header, .shopify-section-header, .section-header){
  z-index: 0 !important;
}

@supports selector(:has(*)){
  body.template-search:has(.template-search .mobile-facets__wrapper details[open])
  :where(.header-wrapper, header.myed-glass-header, .myed-glass-header, .shopify-section-header, .section-header){
    z-index: 0 !important;
  }
}

@media (max-width: 989px){
  body.template-search .template-search__search .predictive-search--search-template{
    max-height: min(52vh, 40rem);
  }
}