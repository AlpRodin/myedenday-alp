{{ 'myed-orbit-links.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign s = section.settings
  assign tv = s.text_variant | default: 'light'
  assign pulse_speed = s.pulse_speed | default: 24 | times: 0.1
  assign pulse_amount = s.pulse_amount | default: 45 | times: 0.001
  assign pulse_stagger = s.pulse_stagger | default: 10 | times: 0.01
-%}

<section
  class="myed-orbit-links myed-orbit-links--{{ s.align }}{% if s.label_pill %} is-pill{% endif %}{% if s.pulse_enable %} is-pulse{% endif %}"
  data-tv="{{ tv }}"
  style="
    --myed-orbit-size: {{ s.circle_size }}px;
    --myed-orbit-gap: {{ s.gap | default: 28 }}px;
    --myed-orbit-group-gap: {{ s.group_gap | default: 26 }}px;
    --myed-orbit-heading-gap: {{ s.heading_gap | default: 14 }}px;
    --myed-orbit-label-size: {{ s.label_size | default: 12 }}px;
    --myed-orbit-label-weight: {{ s.label_weight | default: 650 }};
    --myed-orbit-fg-light: {{ s.text_color_light | default: '#111111' }};
    --myed-orbit-fg-dark: {{ s.text_color_dark | default: '#ffffff' }};
    --myed-orbit-pill-blur: {{ s.label_pill_blur | default: 10 }}px;
    --myed-orbit-pulse-speed: {{ pulse_speed }}s;
    --myed-orbit-pulse: {{ pulse_amount }};
    --myed-orbit-pulse-stagger: {{ pulse_stagger }}s;
  "
>
  <div class="myed-orbit-links__inner page-width">
    <div class="myed-orbit-links__group">
      {%- if s.show_heading_1 -%}
        <h2 class="myed-orbit-links__heading">{{ s.heading_1 | escape }}</h2>
      {%- endif -%}
      <nav
        class="myed-orbit-links__nav"
        aria-label="{{ s.heading_1 | default: 'Nach Stimmung shoppen' | escape }}"
      >
        <ul class="myed-orbit-links__list" role="list">
          {%- for block in section.blocks -%}
            {%- if block.settings.group == 'mood' -%}
              <li class="myed-orbit-links__list-item" {{ block.shopify_attributes }}>
                {%- assign orbit_link = block.settings.link | default: '#' -%}
                <a
                  class="myed-orbit-links__item"
                  style="--i: {{ forloop.index0 }};"
                  href="{{ orbit_link }}"
                  aria-label="{{ block.settings.label | default: 'Stimmung' | escape }}"
                >
                  <span class="myed-orbit-links__media" data-orbit-circle>
                    {%- if block.settings.image != blank -%}
                      {{
                        block.settings.image
                        | image_url: width: 240
                        | image_tag:
                          loading: 'lazy',
                          class: 'myed-orbit-links__image',
                          alt: block.settings.label,
                          widths: '120, 160, 240',
                          sizes: '(max-width: 749px) 72px, 96px'
                      }}
                    {%- else -%}
                      <span class="myed-orbit-links__fallback" aria-hidden="true">
                        {{- block.settings.label | default: '?' | slice: 0, 1 | upcase -}}
                      </span>
                    {%- endif -%}
                  </span>
                  {%- if block.settings.label != blank -%}
                    <span class="myed-orbit-links__label" data-orbit-label>{{ block.settings.label | escape }}</span>
                  {%- endif -%}
                </a>
              </li>
            {%- endif -%}
          {%- endfor -%}
        </ul>
      </nav>
    </div>

    <div class="myed-orbit-links__group">
      {%- if s.show_heading_2 -%}
        <h2 class="myed-orbit-links__heading">{{ s.heading_2 | escape }}</h2>
      {%- endif -%}
      <nav
        class="myed-orbit-links__nav"
        aria-label="{{ s.heading_2 | default: 'Nach Duft shoppen' | escape }}"
      >
        <ul class="myed-orbit-links__list" role="list">
          {%- for block in section.blocks -%}
            {%- if block.settings.group == 'scent' -%}
              <li class="myed-orbit-links__list-item" {{ block.shopify_attributes }}>
                {%- assign orbit_link = block.settings.link | default: '#' -%}
                <a
                  class="myed-orbit-links__item"
                  style="--i: {{ forloop.index0 }};"
                  href="{{ orbit_link }}"
                  aria-label="{{ block.settings.label | default: 'Duft' | escape }}"
                >
                  <span class="myed-orbit-links__media" data-orbit-circle>
                    {%- if block.settings.image != blank -%}
                      {{
                        block.settings.image
                        | image_url: width: 240
                        | image_tag:
                          loading: 'lazy',
                          class: 'myed-orbit-links__image',
                          alt: block.settings.label,
                          widths: '120, 160, 240',
                          sizes: '(max-width: 749px) 72px, 96px'
                      }}
                    {%- else -%}
                      <span class="myed-orbit-links__fallback" aria-hidden="true">
                        {{- block.settings.label | default: '?' | slice: 0, 1 | upcase -}}
                      </span>
                    {%- endif -%}
                  </span>
                  {%- if block.settings.label != blank -%}
                    <span class="myed-orbit-links__label" data-orbit-label>{{ block.settings.label | escape }}</span>
                  {%- endif -%}
                </a>
              </li>
            {%- endif -%}
          {%- endfor -%}
        </ul>
      </nav>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "MyEdenDay Orbit Links",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading_1",
      "label": "Heading 1",
      "default": "Nach Stimmung shoppen"
    },
    {
      "type": "checkbox",
      "id": "show_heading_1",
      "label": "Show heading 1",
      "default": true
    },
    {
      "type": "text",
      "id": "heading_2",
      "label": "Heading 2",
      "default": "Nach Duft shoppen"
    },
    {
      "type": "checkbox",
      "id": "show_heading_2",
      "label": "Show heading 2",
      "default": true
    },
    {
      "type": "select",
      "id": "align",
      "label": "Alignment",
      "default": "center",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" }
      ]
    },
    {
      "type": "range",
      "id": "circle_size",
      "min": 40,
      "max": 84,
      "step": 2,
      "unit": "px",
      "label": "Circle size",
      "default": 56
    },
    {
      "type": "range",
      "id": "gap",
      "min": 8,
      "max": 28,
      "step": 1,
      "unit": "px",
      "label": "Gap",
      "default": 16
    },
    {
      "type": "header",
      "content": "Typography & Contrast"
    },
    {
      "type": "select",
      "id": "text_variant",
      "label": "Text variant",
      "default": "light",
      "options": [
        { "value": "light", "label": "Dark text (for light bg)" },
        { "value": "dark", "label": "Light text (for dark bg)" }
      ]
    },
    {
      "type": "color",
      "id": "text_color_light",
      "label": "Text color (light bg)",
      "default": "#111111"
    },
    {
      "type": "color",
      "id": "text_color_dark",
      "label": "Text color (dark bg)",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "label_size",
      "label": "Label size (px)",
      "min": 10,
      "max": 16,
      "step": 1,
      "default": 12
    },
    {
      "type": "range",
      "id": "label_weight",
      "label": "Label weight",
      "min": 400,
      "max": 800,
      "step": 50,
      "default": 650
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "group_gap",
      "label": "Gap between groups (px)",
      "min": 0,
      "max": 60,
      "step": 2,
      "default": 26
    },
    {
      "type": "range",
      "id": "heading_gap",
      "label": "Heading bottom gap (px)",
      "min": 0,
      "max": 40,
      "step": 1,
      "default": 14
    },
    {
      "type": "header",
      "content": "Label Pill (Readability)"
    },
    {
      "type": "checkbox",
      "id": "label_pill",
      "label": "Enable label pill background",
      "default": true
    },
    {
      "type": "range",
      "id": "label_pill_blur",
      "label": "Pill blur (px)",
      "min": 0,
      "max": 18,
      "step": 1,
      "default": 10
    },
    {
      "type": "header",
      "content": "Pulse"
    },
    {
      "type": "checkbox",
      "id": "pulse_enable",
      "label": "Enable pulse animation",
      "default": false
    },
    {
      "type": "range",
      "id": "pulse_amount",
      "label": "Pulse amount (â€°)",
      "min": 10,
      "max": 80,
      "step": 5,
      "default": 45
    },
    {
      "type": "range",
      "id": "pulse_speed",
      "label": "Pulse speed (x0.1s)",
      "min": 10,
      "max": 60,
      "step": 1,
      "default": 24
    },
    {
      "type": "range",
      "id": "pulse_stagger",
      "label": "Pulse stagger (x0.01s)",
      "min": 0,
      "max": 30,
      "step": 1,
      "default": 10
    }
  ],
  "blocks": [
    {
      "type": "orbit_item",
      "name": "Orbit item",
      "settings": [
        {
          "type": "select",
          "id": "group",
          "label": "Group",
          "default": "mood",
          "options": [
            { "value": "mood", "label": "Mood" },
            { "value": "scent", "label": "Scent" }
          ]
        },
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Calm"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "MyEdenDay Orbit Links"
    }
  ]
}
{% endschema %}
